# form을 통한 server와의 통신

### 클라이언트는 어떻게 보낼 것인가
Form tag 존재의 의의 : URI에 표기된 resource가 아닌 부가적 정보를 서버에 전달하기 위한 데이터 형식. GET은 서버로부터 받아오는 데이터의 범위를 지정하기 위해서 주로 사용. POST의 경우 server의 **상태**(데이터베이스 값 등)에 변화를 주는 데이터 제출 형식. 보내기 전 몇 가지를 정의해야 한다.
+ 어떤 method를 사용할 것인가. (`get`, 혹은 `post`)
+ 어떤 resource를 받아올 것인가, 혹은 건드릴 것인가? (`action` attribute에서 정의)
+ 보낼 때 형식은 어떻게 보내는가(`x-www-urlencoded`, 혹은 `multipart/data-form`)
  - `x-www-urlencoded`는 파일이 추가되지 않은 form. 
  - 파일이 추가되엇을 때는 무조건적으로 `multipart/data-form` 사용. 

##### 파일은 어떻게 보내는가
```html
<input type="file" name="file" accept='.doc' multiple ></input>
```
보내는 클라이언트 입장에서 해주어야 할 일은 **정상**적인 파일을 **정상**적으로 보내는 일. 즉, validation 필요. `accept` attribute은 완전한 해결책이 되지 못하며 자바스크립트 단, 그리고 백엔드 단에서의 [처리](https://developer.mozilla.org/ko/docs/Web/HTML/Element/Input/file)가 필요하다. 


### 서버는 어떻게 처리할 것인가
알다시피 form tag안에는 다양한 필드, 여러 종류의 데이터가 존재하므로 구분해서 받을 필요가 있다. 각자를 구분시키는 identifier는 무엇인가? 바로 form 내에서 모든 input element에서 정의되었던 `name` attribute이다. 
> 각 데이터의 구분 : `name`
받아온 파일은 많은 정보를 지니고 있다. 파일의 경우 `mime-type`, `size` 등을 통해 내가 원하는 동작을 할 수 있다. 

### express와 multer
multer. `multipart/form-data`를 처리하는 미들웨어. 간단한 사용법. 단, form의 `enctype="multipart/form-data"` 안 해줘서 에러를 많이 먹었다. 기존에 있는 미들웨어를 사용할 때의 에러 핸들링. 
